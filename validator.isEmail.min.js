/*!
 * Copyright (c) 2018 Chris O'Hara <cohara87@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.isEmail=e()}(this,function(){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function p(t){if(!("string"==typeof t||t instanceof String)){var e=void 0;throw e=null===t?"null":"object"===(e=void 0===t?"undefined":u(t))&&t.constructor&&t.constructor.hasOwnProperty("name")?t.constructor.name:"a "+e,new TypeError("Expected string but received "+e+".")}}function x(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}function _(t,e){p(t);var r=void 0,n=void 0;n="object"===(void 0===e?"undefined":u(e))?(r=e.min||0,e.max):(r=e,arguments[2]);var i=encodeURI(t).split(/%..|./).length-1;return r<=i&&(void 0===n||i<=n)}var g={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};var l=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,f=/^[0-9A-F]{1,4}$/i;function v(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(p(t),!(e=String(e)))return v(t,4)||v(t,6);if("4"===e)return!!l.test(t)&&t.split(".").sort(function(t,e){return t-e})[3]<=255;if("6"!==e)return!1;var r=t.split(":"),n=!1,i=v(r[r.length-1],4),u=i?7:8;if(r.length>u)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(r.shift(),r.shift(),n=!0):"::"===t.substr(t.length-2)&&(r.pop(),r.pop(),n=!0);for(var o=0;o<r.length;++o)if(""===r[o]&&0<o&&o<r.length-1){if(n)return!1;n=!0}else if(i&&o===r.length-1);else if(!f.test(r[o]))return!1;return n?1<=r.length:r.length===u}var h={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},m=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,y=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,b=/^[a-z\d]+$/,D=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,w=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,$=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;return function(t,e){if(p(t),(e=x(e,h)).require_display_name||e.allow_display_name){var r=t.match(m);if(r)t=r[1];else if(e.require_display_name)return!1}var n=t.split("@"),i=n.pop(),u=n.join("@"),o=i.toLowerCase();if(e.domain_specific_validation&&("gmail.com"===o||"googlemail.com"===o)){var l=(u=u.toLowerCase()).split("+")[0];if(!_(l.replace(".",""),{min:6,max:30}))return!1;for(var f=l.split("."),a=0;a<f.length;a++)if(!b.test(f[a]))return!1}if(!_(u,{max:64})||!_(i,{max:254}))return!1;if(!function(t,e){p(t),(e=x(e,g)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));for(var r=t.split("."),n=0;n<r.length;n++)if(63<r[n].length)return!1;if(e.require_tld){var i=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(i))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(i))return!1}for(var u,o=0;o<r.length;o++){if(u=r[o],e.allow_underscores&&(u=u.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(u))return!1;if(/[\uff01-\uff5e]/.test(u))return!1;if("-"===u[0]||"-"===u[u.length-1])return!1}return!0}(i,{require_tld:e.require_tld})){if(!e.allow_ip_domain)return!1;if(!v(i)){if(!i.startsWith("[")||!i.endsWith("]"))return!1;var s=i.substr(1,i.length-2);if(0===s.length||!v(s))return!1}}if('"'===u[0])return u=u.slice(1,u.length-1),e.allow_utf8_local_part?$.test(u):D.test(u);for(var F=e.allow_utf8_local_part?w:y,d=u.split("."),c=0;c<d.length;c++)if(!F.test(d[c]))return!1;return!0}});